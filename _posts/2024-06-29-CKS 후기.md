---
layout: post
title: CKS ìê²©ì¦ í›„ê¸°
date: 2024-07-29 09:00 +0900 
description: CKS ë¬¸ì œ í’€ì´ í›„ê¸°
category: [ìê²©ì¦, CKS] 
tags: [CKS, Kubernetes, ìê²©ì¦] 
pin: false
math: true
mermaid: true
---
CKS ì‹œí—˜ í›„ê¸°
<!--more-->


## CKS í›„ê¸°


CKSë€ **Certified Kubernetes Security Specialist**ì˜ ì•½ìë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ ë³´ì•ˆ ì‹œí—˜ì´ë‹¤. ì„ ìˆ˜ ìê²©ìœ¼ë¡œëŠ” CKAê°€ ìˆë‹¤. ì´ë²ˆ ì‹œí—˜ì„ í†µí•´ ë³´ì•ˆì— ëŒ€í•´ ê¹Šê²Œ ì•Œì•„ë´ì„œ ì¢‹ì•˜ë‹¤. Admission Controllerì™€ OPAë¥¼ í†µí•´ ìì£¼ í•„ìš”í•œ ë³´ì•ˆì‘ì—…ì„ ì§„í–‰í•  ìˆ˜ ìˆëŠ” ê²ƒ ê°™ë‹¤. ì´ë²ˆ ê¸°íšŒì— ë” ê¹Šê²Œ ê³µë¶€í•  ì°¸ì´ë‹¤. ì•„ë˜ëŠ” CKS ì‹œí—˜ì—ì„œ ë‚˜ì™”ë˜ ë¬¸ì œì— ì •ë¦¬í–ˆë‹¤. CKAë¥¼ ì·¨ë“í–ˆê³ , ì‹¤ë¬´ì—ì„œ ê²½í—˜ì´ ë§ìœ¼ì‹  ë¶„ë“¤ì´ë¼ë©´ ì•„ë˜ì— ë‚´ìš©ë§Œ ë´ë„ ì¶©ë¶„íˆ ì·¨ë“í•  ìˆ˜ ìˆì„ ê±°ë¼ ìƒê°í•œë‹¤.


ë“œë””ì–´ Kubernetes ìê²©ì¦ì„ ëª¨ë‘ ì·¨ë“í–ˆë‹¤. í¼ì¦ì´ ì™„ì„±ëœ ëŠë‚Œì´ë¼ ë¿Œë“¯í•˜ë‹¤~


### vs CKA


CKAì™€ CKADì— ë¹„í•´ ë„êµ¬ë¥¼ ë§ì´ ì‚¬ìš©í•œë‹¤. ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë„êµ¬ëŠ” CKS ë¬¸ì„œì—ì„œ íŒíŠ¸ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤. ì•„ë˜ëŠ” ê³µì‹ ê°€ì´ë“œì— ë‚˜ì™€ìˆëŠ” ì°¸ì¡°ê°€ í—ˆìš©ë˜ëŠ” ë¬¸ì„œì´ë‹¤. ì—¬ê¸°ì„œ ì¿ ë²„ë„¤í‹°ìŠ¤ Docs ì´ì™¸ì˜ 3ê°€ì§€ ë„êµ¬ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ì´ ë„êµ¬ë“¤ì˜ ì‚¬ìš©ìš©ë„ëŠ” ì•Œì•„ë‘ê³  ê°€ë©´ ì¢‹ë‹¤. 


> ğŸ’¡ **í—ˆìš©í•˜ëŠ” ë¬¸ì„œ ë¦¬ì†ŒìŠ¤ ì¶œì²˜:** [**Linux Foundation**](https://docs.linuxfoundation.org/tc-docs/certification/certification-resources-allowed#certified-kubernetes-security-specialist-cks)  
> - **Kubernetes Documentation:**  
>   
> - **Tools:**  
>   
> - **App Armor:**

	- **Kubernetes Documentation:**
		- [https://kubernetes.io/docs/](https://kubernetes.io/docs/) and their subdomains
		- [https://kubernetes.io/blog/](https://kubernetes.io/blog/) and their subdomains

		This includes all available language translations of these pages (e.g. [https://kubernetes.io/zh/docs/)](https://kubernetes.io/zh/docs/home/)

	- **Tools:**
		- Trivy documentation [https://aquasecurity.github.io/trivy/](https://aquasecurity.github.io/trivy/)
		- Falco documentation [https://falco.org/docs/](https://falco.org/docs/)
		- etcd documentation [https://etcd.io/docs/](https://etcd.io/docs/)

		This includes all available language translations of these pages (e.g. [https://falco.org/zh/docs/](https://falco.org/zh/docs/))

	- **App Armor:**
		- Documentation [https://gitlab.com/apparmor/apparmor/-/wikis/Documentation](https://gitlab.com/apparmor/apparmor/-/wikis/Documentation)

### ìœ í˜•


ì•„ë˜ëŠ” [killer.sh](http://killer.sh/)ì™€ ì‹œí—˜ì—ì„œ ì£¼ë¡œ ë‚˜ì™”ë˜ ìœ í˜•ê³¼ ìœ í˜•ì— ëŒ€í•œ ì£¼ìš” ë°©ë²•ì„ ì„¤ëª…í–ˆë‹¤. ê°œì¸ì ìœ¼ë¡œ ì‹¤ë¬´ ê²½í—˜ì´ ë§ê³ , ê³µë¶€ë³´ë‹¨ ìê²©ì¦ ì·¨ë“ì´ ëª©ì ì´ì‹  ë¶„ë“¤ì€ ì•„ë˜ì˜ ë‚´ìš©ì— ëŒ€í•´ ì •ë¦¬í•˜ê³  ì‹œí—˜ì„ ë´ë„ ê´œì°®ì„ ê²ƒ ê°™ë‹¤ëŠ” ìƒê°ì´ ë“ ë‹¤.

- [Admission Controller (Plugin)](https://kubernetes.io/docs/reference/access-authn-authz/admission-controllers/#imagepolicywebhook) - Pod Security, NodeRestriction, ImagePolicyWebhook
- [Auditing](https://kubernetes.io/docs/tasks/debug/debug-cluster/audit/): kube-apiserverë¥¼ ìˆ˜ì •í•˜ì—¬, audit ë¡œê·¸ë¥¼ ë‚¨ê¸´ë‹¤.
	- audit ì„¤ì •:

		```yaml
		- --audit-policy-file=/etc/kubernetes/audit/audit-policy.yaml
		- --audit-log-path=/etc/kubernetes/audit/audit.log
		- --audit-log-maxsize=100
		- --audit-log-maxbackup=5 
		```

	- hostpathë¡œ audit-policy.yamlê³¼ ë¡œê·¸ë¥¼ ë‚¨ê¸¸ volume ë§ˆìš´íŠ¸ ì§„í–‰
	- log pathë¥¼ í™•ì¸í•˜ì—¬, ë¡œê·¸ê°€ ë‚¨ëŠ”ì§€ í™•ì¸í•œë‹¤.
- [Container Security](https://kubernetes.io/docs/tutorials/security/apparmor/)(App Armor): App Armor ëª…ë ¹ì–´ë¥¼ í†µí•´ ì›Œì»¤ë…¸ë“œì— í”„ë¡œí•„ì„ ë“±ë¡í•˜ê³ , Podì— ì¶”ê°€í•œë‹¤. í˜„ì¬ ê³µì‹ë¬¸ì„œëŠ” 1.30 ê¸°ì¤€ì´ì§€ë§Œ, ì‹œí—˜ í™˜ê²½ì€ 1.29ë²„ì „ìœ¼ë¡œ annotationì„ í†µí•´ ì§„í–‰í–ˆë‹¤. ì´í›„ ì‹œí—˜í™˜ê²½ì´ ì—…ë°ì´íŠ¸ë˜ë©´ ê³µì‹ë¬¸ì„œì²˜ëŸ¼ `securityContext.appArmorProfile` ë¡œ ì„¤ì •í•˜ë©´ ëœë‹¤.
- Docker Image Best Practices
	1. ë£¨íŠ¸ ê³„ì •ìœ¼ë¡œ ì‹¤í–‰í•˜ì§€ ì•Šê¸°
	2. ë¶ˆí•„ìš”í•œ íŒŒì¼ ë¹¼ê¸°
	3. ì´ë¯¸ì§€ ë²„ì „ ì •ë³´ ëª…ì‹œí•˜ê¸°(latest ì‚¬ìš©x)
- ETCD ì•”í˜¸í™”([Encrypting Confidential Data at Rest](https://kubernetes.io/docs/tasks/administer-cluster/encrypt-data/))
- Immutability for Pod(íŒŒë“œê°€ ì‹¤í–‰ë˜ê³ , ë°”ë€Œì§€ ì•Šë„ë¡(ë¶ˆë³€ì„±) ìœ„í—˜ìš”ì†Œë¥¼ ì—†ì• ëŠ” ë°©ì‹ì´ë‹¤.)
	- startProbe ì‚¬ìš©í•´ì„œ ë¶ˆí•„ìš”í•œ ì‹¤í–‰íŒŒì¼ ì—†ì• ê¸° ex) `rm -f /bin/bash`
	- readOnlyRootFilesystem = true
- [Ingress TLS](https://kubernetes.io/ko/docs/concepts/services-networking/ingress/#tls)
	- `k -n {ns} create secret tls {secret-name} --key tls.key --cert tls.crt`
	- Ingressì— TLS ì„¤ì • ì¶”ê°€(secret)
- [Network Policy](https://kubernetes.io/docs/concepts/services-networking/network-policies/): Network Policyì€ ì—¬ëŸ¬ ì •ì±…ì´ ORë¡œ ì—°ê²°ëœë‹¤. allow/deny ì •ì±…ì´ ëª¨ë‘ ìˆìœ¼ë©´ allowì´ë‹¤.
- [OPA](https://kubernetes.io/blog/2019/08/06/opa-gatekeeper-policy-and-governance-for-kubernetes/): OPAëŠ” CRDë¥¼ í†µí•´ ì§„í–‰ë˜ë‹ˆ, CRDë¥¼ í™•ì¸í•˜ì—¬ ì •ì±…ì„ ë¬¸ì œì— ë§ê²Œ ìˆ˜ì •í•˜ë©´ ëœë‹¤.
- [RBAC](https://kubernetes.io/docs/reference/access-authn-authz/rbac/): CKAì™€ í¬ê²Œ ë‹¤ë¥´ì§€ ì•Šë‹¤.
- [Runtime Class](https://kubernetes.io/docs/concepts/containers/runtime-class/): ëŸ°íƒ€ì„ í´ë˜ìŠ¤ ìƒì„±í•˜ê³ , íŒŒë“œì—ì„œ ì§€ì •í•˜ë©´ ëœë‹¤.
- Secret
- [Security Context](https://kubernetes.io/docs/tasks/configure-pod-container/security-context/)
- ë³´ì•ˆ ë„êµ¬
	- Trivy: ì´ë¯¸ì§€ ìŠ¤ìº” ë„êµ¬, í•´ë‹¹ ì´ë¯¸ì§€ì˜ ì·¨ì•½ì ì„ ì•Œë ¤ì¤€ë‹¤. `trivy -i nginx:alpine | grep Total`
	- Falco: ì‹¤ì‹œê°„ìœ¼ë¡œ ì»¤ë„ ì´ë²¤íŠ¸ë¥¼ ëª¨ë‹ˆí„°ë§í•œë‹¤. `falco`
	- kube-bench: CIS ë²¤ì¹˜ë§ˆí¬ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì·¨ì•½ì ì„ ì•Œë ¤ì£¼ê³ , í•´ê²°ë°©ë²•ê¹Œì§€ ì¹œì ˆíˆ ì•Œë ¤ì¤€ë‹¤.

### ìê²©ì¦


![Untitled.png](/assets/img/post/CKS%20í›„ê¸°/1.png)

